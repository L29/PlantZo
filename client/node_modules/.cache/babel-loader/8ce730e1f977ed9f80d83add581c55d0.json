{"ast":null,"code":"var _jsxFileName = \"/home/linuz/Desktop/Semester4/PlantZo/client/src/pages/ProfilePage.js\",\n    _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport React, { useState } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { withRouter } from \"react-router\";\nimport LabelContainer from \"../components/LabelContainer\";\nimport UserFormInput from \"../components/UserFormInput\";\nimport { setCurrentUser } from \"../redux/user/user.actions\";\nimport { selectCurrentUser } from \"../redux/user/user.selectors\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ProfilePage = ({\n  history\n}) => {\n  _s();\n\n  const currentUser = useSelector(state => selectCurrentUser(state));\n  const {\n    displayName,\n    email\n  } = currentUser;\n  const dispatch = useDispatch();\n  const [formProfile, setFormProfile] = useState({\n    firstName: \"\",\n    lastName: \"\",\n    oldPassword: \"\",\n    newPassword: \"\",\n    confirmPassword: \"\",\n    address: \"\",\n    selectedProfileImage: null,\n    selectedBackgroundProfileImage: null\n  });\n  const {\n    firstName,\n    lastName,\n    oldPassword,\n    newPassword,\n    confirmPassword,\n    address,\n    selectedProfileImage,\n    selectedBackgroundProfileImage\n  } = formProfile;\n  const user = {\n    displayName: `${firstName} ${lastName}`,\n    email,\n    address,\n    profileImage: selectedProfileImage,\n    backgroundImage: selectedBackgroundProfileImage\n  };\n\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormProfile({ ...formProfile,\n      [name]: value\n    });\n  };\n\n  const handleImageSelected = e => {\n    const {\n      name,\n      files\n    } = e.target;\n    setFormProfile({ ...formProfile,\n      [name]: files[0]\n    });\n  };\n\n  const handleResetChanged = () => {\n    setFormProfile({\n      firstName: \"\",\n      lastName: \"\",\n      oldPassword: \"\",\n      newPassword: \"\",\n      confirmPassword: \"\",\n      address: \"\",\n      selectedProfileImage: null,\n      selectedBackgroundProfileImage: null\n    });\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault(); // CATATAN: Masih butuh perbaikan untuk menggunakan foto dari file\n\n    dispatch(setCurrentUser(user));\n\n    if (newPassword !== confirmPassword) {\n      setFormProfile({ ...formProfile,\n        newPassword: \"\",\n        confirmPassword: \"\"\n      });\n      return alert(\"Password baru dan Konfirmasi password tidak Match :(\");\n    }\n\n    const fd = new FormData();\n    fd.append(\"firstName\", firstName);\n    fd.append(\"lastName\", lastName);\n    fd.append(\"oldPassword\", oldPassword);\n    fd.append(\"newPassword\", newPassword);\n    fd.append(\"profile_image\", selectedProfileImage, selectedProfileImage.name);\n    fd.append(\"background_image\", selectedBackgroundProfileImage, selectedBackgroundProfileImage.name); // CATATAN: Response belum sesuai tapi sudah bisa connect :)\n\n    axios.post(\"/settings/profile\", fd).then(res => {\n      console.log(res.data);\n    });\n    setFormProfile({ ...formProfile,\n      firstName: \"\",\n      lastName: \"\",\n      oldPassword: \"\",\n      newPassword: \"\",\n      confirmPassword: \"\",\n      address: \"\",\n      selectedProfileImage: null,\n      selectedBackgroundProfileImage: null\n    });\n    alert(\"Data berhasil diubah\");\n    history.push(\"/user\");\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-1 flex-col\",\n    children: [/*#__PURE__*/_jsxDEV(LabelContainer, {\n      onClick: () => history.push(\"/user\"),\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"flex items-center justify-center space-x-4 cursor-pointer\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            className: \"h-10 w-10\",\n            fill: \"none\",\n            viewBox: \"0 0 24 24\",\n            stroke: \"currentColor\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: 2,\n              d: \"M10 19l-7-7m0 0l7-7m-7 7h18\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-4xl font-light\",\n          children: \"Pengaturan > Profil\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      type: \"post\",\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(LabelContainer, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col flex-1 space-y-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-4\",\n            children: \"USERNAME\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(UserFormInput, {\n            type: \"text\",\n            name: \"username\",\n            label: \"Username sekarang\",\n            value: displayName,\n            required: true,\n            clean: true,\n            disabled: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(UserFormInput, {\n            type: \"text\",\n            name: \"firstName\",\n            label: \"First name\",\n            value: firstName,\n            required: true,\n            handleChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(UserFormInput, {\n            type: \"text\",\n            name: \"lastName\",\n            label: \"Last name\",\n            value: lastName,\n            required: true,\n            handleChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(LabelContainer, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col flex-1 space-y-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-4\",\n            children: \"FOTO PROFILE\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-center\",\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              xmlns: \"http://www.w3.org/2000/svg\",\n              className: \"h-80 w-80\",\n              fill: \"none\",\n              viewBox: \"0 0 24 24\",\n              stroke: \"currentColor\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: 2,\n                d: \"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(UserFormInput, {\n            type: \"file\",\n            name: \"selectedProfileImage\",\n            label: \"Upload profile image\",\n            required: true,\n            handleChange: handleImageSelected\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(LabelContainer, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col flex-1 space-y-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-4\",\n            children: \"FOTO SAMPUL\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-center\",\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              xmlns: \"http://www.w3.org/2000/svg\",\n              className: \"h-80 w-80\",\n              fill: \"none\",\n              viewBox: \"0 0 24 24\",\n              stroke: \"currentColor\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: 2,\n                d: \"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 207,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(UserFormInput, {\n            type: \"file\",\n            name: \"selectedBackgroundProfileImage\",\n            label: \"Upload profile image\",\n            required: true,\n            handleChange: handleImageSelected\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(LabelContainer, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col flex-1 space-y-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-4\",\n            children: \"ALAMAT\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(UserFormInput, {\n            type: \"text\",\n            name: \"address\",\n            label: \"Alamat lengkap\",\n            value: address,\n            required: true,\n            large: true,\n            handleChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(LabelContainer, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col flex-1 space-y-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-4\",\n            children: \"UBAH KATA SANDI\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(UserFormInput, {\n            type: \"password\",\n            name: \"oldPassword\",\n            label: \"Password lama\",\n            value: oldPassword,\n            required: true,\n            handleChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(UserFormInput, {\n            type: \"password\",\n            name: \"newPassword\",\n            label: \"Password baru\",\n            value: newPassword,\n            required: true,\n            handleChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(UserFormInput, {\n            type: \"password\",\n            name: \"confirmPassword\",\n            label: \"Konfirmasi password baru\",\n            value: confirmPassword,\n            required: true,\n            handleChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(LabelContainer, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-1 justify-end space-x-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"bg-green-400 px-4 py-6\",\n              onClick: handleResetChanged,\n              children: \"BUANG PERUBAHAN\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 270,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"bg-yellow-300 px-4 py-6\",\n              children: \"KONFIRMASI PERUBAHAN\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 115,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ProfilePage, \"8rdITByljB/IrhCwURzzRgOHqS8=\", false, function () {\n  return [useSelector, useDispatch];\n});\n\n_c = ProfilePage;\nexport default _c2 = withRouter(ProfilePage);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"ProfilePage\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/home/linuz/Desktop/Semester4/PlantZo/client/src/pages/ProfilePage.js"],"names":["axios","React","useState","useSelector","useDispatch","withRouter","LabelContainer","UserFormInput","setCurrentUser","selectCurrentUser","ProfilePage","history","currentUser","state","displayName","email","dispatch","formProfile","setFormProfile","firstName","lastName","oldPassword","newPassword","confirmPassword","address","selectedProfileImage","selectedBackgroundProfileImage","user","profileImage","backgroundImage","handleChange","e","name","value","target","handleImageSelected","files","handleResetChanged","handleSubmit","preventDefault","alert","fd","FormData","append","post","then","res","console","log","data","push"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport React, { useState } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { withRouter } from \"react-router\";\n\nimport LabelContainer from \"../components/LabelContainer\";\nimport UserFormInput from \"../components/UserFormInput\";\nimport { setCurrentUser } from \"../redux/user/user.actions\";\nimport { selectCurrentUser } from \"../redux/user/user.selectors\";\n\nconst ProfilePage = ({ history }) => {\n  const currentUser = useSelector((state) => selectCurrentUser(state));\n  const { displayName, email } = currentUser;\n  const dispatch = useDispatch();\n\n  const [formProfile, setFormProfile] = useState({\n    firstName: \"\",\n    lastName: \"\",\n    oldPassword: \"\",\n    newPassword: \"\",\n    confirmPassword: \"\",\n    address: \"\",\n    selectedProfileImage: null,\n    selectedBackgroundProfileImage: null,\n  });\n\n  const {\n    firstName,\n    lastName,\n    oldPassword,\n    newPassword,\n    confirmPassword,\n    address,\n    selectedProfileImage,\n    selectedBackgroundProfileImage,\n  } = formProfile;\n\n  const user = {\n    displayName: `${firstName} ${lastName}`,\n    email,\n    address,\n    profileImage: selectedProfileImage,\n    backgroundImage: selectedBackgroundProfileImage,\n  };\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormProfile({ ...formProfile, [name]: value });\n  };\n\n  const handleImageSelected = (e) => {\n    const { name, files } = e.target;\n    setFormProfile({ ...formProfile, [name]: files[0] });\n  };\n\n  const handleResetChanged = () => {\n    setFormProfile({\n      firstName: \"\",\n      lastName: \"\",\n      oldPassword: \"\",\n      newPassword: \"\",\n      confirmPassword: \"\",\n      address: \"\",\n      selectedProfileImage: null,\n      selectedBackgroundProfileImage: null,\n    });\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    // CATATAN: Masih butuh perbaikan untuk menggunakan foto dari file\n    dispatch(setCurrentUser(user));\n\n    if (newPassword !== confirmPassword) {\n      setFormProfile({ ...formProfile, newPassword: \"\", confirmPassword: \"\" });\n      return alert(\"Password baru dan Konfirmasi password tidak Match :(\");\n    }\n\n    const fd = new FormData();\n\n    fd.append(\"firstName\", firstName);\n    fd.append(\"lastName\", lastName);\n    fd.append(\"oldPassword\", oldPassword);\n    fd.append(\"newPassword\", newPassword);\n    fd.append(\"profile_image\", selectedProfileImage, selectedProfileImage.name);\n    fd.append(\n      \"background_image\",\n      selectedBackgroundProfileImage,\n      selectedBackgroundProfileImage.name\n    );\n\n    // CATATAN: Response belum sesuai tapi sudah bisa connect :)\n    axios.post(\"/settings/profile\", fd).then((res) => {\n      console.log(res.data);\n    });\n\n    setFormProfile({\n      ...formProfile,\n      firstName: \"\",\n      lastName: \"\",\n      oldPassword: \"\",\n      newPassword: \"\",\n      confirmPassword: \"\",\n      address: \"\",\n      selectedProfileImage: null,\n      selectedBackgroundProfileImage: null,\n    });\n\n    alert(\"Data berhasil diubah\");\n    history.push(\"/user\");\n  };\n\n  return (\n    <div className=\"flex flex-1 flex-col\">\n      <LabelContainer onClick={() => history.push(\"/user\")}>\n        <span className=\"flex items-center justify-center space-x-4 cursor-pointer\">\n          <span>\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              className=\"h-10 w-10\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              stroke=\"currentColor\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M10 19l-7-7m0 0l7-7m-7 7h18\"\n              />\n            </svg>\n          </span>\n          <span className=\"text-4xl font-light\">Pengaturan &gt; Profil</span>\n        </span>\n      </LabelContainer>\n      <form type=\"post\" onSubmit={handleSubmit}>\n        <LabelContainer>\n          <div className=\"flex flex-col flex-1 space-y-2\">\n            <div className=\"mb-4\">USERNAME</div>\n            <UserFormInput\n              type=\"text\"\n              name=\"username\"\n              label=\"Username sekarang\"\n              value={displayName}\n              required\n              clean\n              disabled\n            />\n            <UserFormInput\n              type=\"text\"\n              name=\"firstName\"\n              label=\"First name\"\n              value={firstName}\n              required\n              handleChange={handleChange}\n            />\n            <UserFormInput\n              type=\"text\"\n              name=\"lastName\"\n              label=\"Last name\"\n              value={lastName}\n              required\n              handleChange={handleChange}\n            />\n          </div>\n        </LabelContainer>\n        <LabelContainer>\n          <div className=\"flex flex-col flex-1 space-y-2\">\n            <div className=\"mb-4\">FOTO PROFILE</div>\n            <div className=\"flex justify-center\">\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                className=\"h-80 w-80\"\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n                stroke=\"currentColor\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth={2}\n                  d=\"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z\"\n                />\n              </svg>\n            </div>\n            <UserFormInput\n              type=\"file\"\n              name=\"selectedProfileImage\"\n              label=\"Upload profile image\"\n              required\n              handleChange={handleImageSelected}\n            />\n          </div>\n        </LabelContainer>\n        <LabelContainer>\n          <div className=\"flex flex-col flex-1 space-y-2\">\n            <div className=\"mb-4\">FOTO SAMPUL</div>\n            <div className=\"flex justify-center\">\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                className=\"h-80 w-80\"\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n                stroke=\"currentColor\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth={2}\n                  d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\"\n                />\n              </svg>\n            </div>\n            <UserFormInput\n              type=\"file\"\n              name=\"selectedBackgroundProfileImage\"\n              label=\"Upload profile image\"\n              required\n              handleChange={handleImageSelected}\n            />\n          </div>\n        </LabelContainer>\n        <LabelContainer>\n          <div className=\"flex flex-col flex-1 space-y-2\">\n            <div className=\"mb-4\">ALAMAT</div>\n            <UserFormInput\n              type=\"text\"\n              name=\"address\"\n              label=\"Alamat lengkap\"\n              value={address}\n              required\n              large\n              handleChange={handleChange}\n            />\n          </div>\n        </LabelContainer>\n        <LabelContainer>\n          <div className=\"flex flex-col flex-1 space-y-2\">\n            <div className=\"mb-4\">UBAH KATA SANDI</div>\n            <UserFormInput\n              type=\"password\"\n              name=\"oldPassword\"\n              label=\"Password lama\"\n              value={oldPassword}\n              required\n              handleChange={handleChange}\n            />\n            <UserFormInput\n              type=\"password\"\n              name=\"newPassword\"\n              label=\"Password baru\"\n              value={newPassword}\n              required\n              handleChange={handleChange}\n            />\n            <UserFormInput\n              type=\"password\"\n              name=\"confirmPassword\"\n              label=\"Konfirmasi password baru\"\n              value={confirmPassword}\n              required\n              handleChange={handleChange}\n            />\n          </div>\n        </LabelContainer>\n        <LabelContainer>\n          <div className=\"flex flex-1 justify-end space-x-6\">\n            <div>\n              <button\n                className=\"bg-green-400 px-4 py-6\"\n                onClick={handleResetChanged}\n              >\n                BUANG PERUBAHAN\n              </button>\n            </div>\n            <div>\n              <button type=\"submit\" className=\"bg-yellow-300 px-4 py-6\">\n                KONFIRMASI PERUBAHAN\n              </button>\n            </div>\n          </div>\n        </LabelContainer>\n      </form>\n    </div>\n  );\n};\n\nexport default withRouter(ProfilePage);\n"]},"metadata":{},"sourceType":"module"}